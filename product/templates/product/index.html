{% extends "product/base.html" %}

{% block content %}

	<p>Holdings</p>
	<ul>
		{% for holding in allholdingsz  %}
		<li> {{holding}}</li>
		{% empty %}
		<li> no holding </li>
		{% endfor %}
	</ul>
	<p>total:{{total}}{{piedatalist}}</p>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main" style="width:400px;height:300px;"></div>
    <!-- ECharts单文件引入 -->
    <script src="http://echarts.baidu.com/build/dist/echarts.js"></script>
    <script type="text/javascript">
        // 路径配置
        require.config({
            paths: {
                echarts: 'http://echarts.baidu.com/build/dist'
            }
        });
        
        // 使用
        require(
            [
                'echarts',
                'echarts/chart/line',   // 按需加载所需图表，如需动态类型切换功能，别忘了同时加载相应图表
                'echarts/chart/bar',
				'echarts/chart/pie'
            ],
            function (ec) {
                // 基于准备好的dom，初始化echarts图表
                var myChart = ec.init(document.getElementById('main')); 
                var kv = new Array();//声明一个新的字典
				kv = {{ piedatalist|safe }};//取出后台传递的数据，此处添加safe过滤避免警告
				//var test = new Array();//声明一个新的字典用于存放数据
				//for (var logKey in kv) {
				//将对应键值对取出存入test，logKey 为该字典的键
				//	test.push({value: kv[logKey], name: logKey});
				//	alert(logKey)
				//}
				
                option = {
				    title: {
						show:true,
						fontSize : 15,
						text: '数据测试'
							},
						series: [{
							type: 'pie',
							radius: '55%',
							data:kv
						}]


				};
        
                // 为echarts对象加载数据 
                myChart.setOption(option); 
            }
        );
    </script>
{% endblock content %}